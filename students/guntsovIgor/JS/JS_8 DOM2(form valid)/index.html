<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Form validation</title>
        <style type="text/css"></style>
    </head>
    <body>
        <form id="form" action="#" method="POST" name="Qustionare">
            <fieldset>
                <legend>Ваш пол</legend>
                <p><label for="man">Мужской</label><input type="radio" name="gender" value="man" id="man" /></p>
                <p><label for="woman">Женский</label><input type="radio" name="gender" value="woman" id="woman" /></p>
            </fieldset>
            <div>
                <p><label for="age">Ваш возраст*</label></p>
                <select name="age" id="age" data-required="true" data-error-message="Поле возраста не заполнено">
                    <option value="notChoosen">Выберите возраст</option>
                    <option value="baby">0-10</option>
                    <option value="teenagar">10-20</option>
                    <option value="old">20+</option>
                </select>
            </div>
            <div>
                <p><label for="city">Откуда Вы</label></p>
                <select name="city" id="city" data-required="true">
                    <option value="0" label="Выберите область" selected="selected">Выберите область</option>
                    <option value="1">Винницкая</option>
                    <option value="18">Волынская</option>
                    <option value="11">Днепропетровская</option>
                    <option value="13">Донецкая</option>
                    <option value="2">Житомирская</option>
                    <option value="22">Закарпатская</option>
                    <option value="14">Запорожская</option>
                    <option value="15">Ивано-Франковская</option>
                    <option value="10">Киевская</option>
                    <option value="16">Кировоградская</option>
                    <option value="17">Луганская</option>
                    <option value="5">Львовская</option>
                    <option value="19">Николаевская</option>
                    <option value="12">Одесская</option>
                    <option value="20">Полтавская</option>
                    <option value="21">Республика Крым</option>
                    <option value="9">Ровенская</option>
                    <option value="8">Сумская</option>
                    <option value="3">Тернопольская</option>
                    <option value="7">Харьковская</option>
                    <option value="23">Херсонская</option>
                    <option value="4">Хмельницкая</option>
                    <option value="24">Черкасская</option>
                    <option value="6">Черниговская</option>
                    <option value="25">Черновицкая</option>
                </select>
            </div>
            <div>
                <p>Любимое животное</p>
                <label for="dog">Собака</label><input type="checkbox" name="pet" value="dog" id="dog" /> <label for="cat">Кошка</label><input type="checkbox" name="pet" value="cat" id="cat" />
            </div>
            <div class="form__birthday">
                <br /><label>Дата рождения*<input type="date" name="date of submitting" data-required="true" data-error-message="Поле даты рождения не заполнено" id="date" /></label>
            </div>
            <br /><textarea name="wishes" id="description" cols="30" rows="10" placeholder="особые пожелания"></textarea> <br />
            <input type="submit" value="SUBMIT" />
        </form>
        <script>
            const form = document.getElementById("form");

            form.addEventListener("submit", function (event) {
                event.preventDefault();
                removeValidation();
                var error = false;

                for (let i = 0; i < this.length; i++) {
                    if (this[i].dataset.required === "true" && (this[i].value === "" || this[i].value === "notChoosen")) {
                        let errorAdd = document.createElement("span");
                        errorAdd.className = "error";
                        errorAdd.style.cssText = "color: red; font-weight: bold; font-style:italic;";
                        errorAdd.innerHTML = this[i].dataset.errorMessage;
                        this[i].parentElement.append(errorAdd);
                        error = true;
                    }
                }

                if (!error) {
                    this.submit();
                }
            });

            const removeValidation = function () {
                const errors = document.querySelectorAll(".error");
                for (let i = 0; i < errors.length; i++) {
                    if (errors[i].classList.contains("error")) {
                        errors[i].classList.remove("error");
                    }
                }
            };
        </script>
    </body>
</html>
